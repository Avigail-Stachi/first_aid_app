{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\first_aid_app\\\\client\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { FaTrash } from 'react-icons/fa';\nimport ChatWindow from \"./components/ChatWindow\";\nimport MessageInput from \"./components/MessageInput\";\nimport VoiceRecorder from \"./components/VoiceRecorder\";\nimport \"./App.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [inputMsg, setInputMsg] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n\n  //לשמור את ההיסטוריה של ההודעות במערך\n  const [history, setHistory] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [recordings, setRecordings] = useState([]);\n  const sendRequest = async () => {\n    if (!inputMsg.trim()) return;\n\n    // הוספת הודעת המשתמש\n    const userMessage = {\n      text: inputMsg,\n      fromUser: true\n    };\n    setMessages(prev => [...prev, userMessage]);\n    const newHistory = [...history, inputMsg];\n    setHistory(newHistory);\n    try {\n      setIsLoading(true);\n      // שולחים את כל ההיסטוריה כולל ההודעה החדשה\n      console.log(\"API URL:\", process.env.REACT_APP_API_URL);\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/predict`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          history: newHistory // שולחים את כל ההיסטוריה + ההודעה הנוכחית\n        })\n      });\n      if (!res.ok) {\n        throw new Error(\"Server error\");\n      }\n      const data = await res.json();\n      const answer = (data === null || data === void 0 ? void 0 : data.result) || \"Error: No result received\";\n\n      // הוספת תשובת השרת להודעות וגם להיסטוריה\n      setMessages(prev => [...prev, {\n        text: answer,\n        fromUser: false\n      }]);\n      setHistory([...newHistory, answer]);\n      setInputMsg(\"\");\n    } catch (error) {\n      setMessages(prev => [...prev, {\n        text: \"Error contacting server\",\n        fromUser: false\n      }]);\n    }\n    setIsLoading(false);\n  };\n\n  // כפתור לאיפוס הצ'אט (היסטוריה והודעות)\n  const newChat = () => {\n    setMessages([]);\n    setHistory([]);\n    setInputMsg('');\n    setRecordings([]);\n  };\n\n  // טיפול בקבלת ההקלטה מ-VoiceRecorder (מכניסים לאחסון ההיסטוריה)\n  const handleSendAudio = blob => {\n    const url = URL.createObjectURL(blob);\n    const id = Date.now(); // מזהה ייחודי\n    setRecordings(prev => [...prev, {\n      id,\n      url,\n      blob\n    }]);\n    // אפשר להוסיף כאן הודעה בטקסט אם רוצים\n  };\n  const deleteRecording = id => {\n    setRecordings(prev => prev.filter(rec => rec.id !== id));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"600px\",\n      margin: \"0 auto\",\n      padding: \"2rem\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"ResQPal Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ChatWindow, {\n      messages: messages\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n      inputMsg: inputMsg,\n      setInputMsg: setInputMsg,\n      onSend: sendRequest,\n      disabled: isLoading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(VoiceRecorder, {\n      onSendAudio: handleSendAudio\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: newChat,\n      style: {\n        marginTop: '1rem'\n      },\n      children: \"New Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Recordings History\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 1\n    }, this), recordings.length === 0 && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No recordings yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      style: {\n        listStyle: 'none',\n        padding: 0\n      },\n      children: recordings.map(({\n        id,\n        url\n      }) => /*#__PURE__*/_jsxDEV(\"li\", {\n        style: {\n          marginBottom: '1rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          controls: true,\n          src: url\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => deleteRecording(id),\n          style: {\n            marginLeft: '1rem',\n            color: 'red',\n            cursor: 'pointer'\n          },\n          title: \"Delete Recording\",\n          children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 7\n        }, this)]\n      }, id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 5\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"mZz/KIIGkugSPekx8jfqvRu+VkE=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","FaTrash","ChatWindow","MessageInput","VoiceRecorder","jsxDEV","_jsxDEV","App","_s","inputMsg","setInputMsg","messages","setMessages","history","setHistory","isLoading","setIsLoading","recordings","setRecordings","sendRequest","trim","userMessage","text","fromUser","prev","newHistory","console","log","process","env","REACT_APP_API_URL","res","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","answer","result","error","newChat","handleSendAudio","blob","url","URL","createObjectURL","id","Date","now","deleteRecording","filter","rec","style","maxWidth","margin","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","onSend","disabled","onSendAudio","onClick","marginTop","length","listStyle","map","marginBottom","controls","src","marginLeft","color","cursor","title","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/first_aid_app/client/frontend/src/App.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { FaTrash } from 'react-icons/fa';\n\nimport ChatWindow from \"./components/ChatWindow\";\nimport MessageInput from \"./components/MessageInput\";\nimport VoiceRecorder from \"./components/VoiceRecorder\";\nimport \"./App.css\";\n\nfunction App() {\n  const [inputMsg, setInputMsg] = useState(\"\");\n  const [messages, setMessages] = useState([]);\n\n  //לשמור את ההיסטוריה של ההודעות במערך\n  const [history, setHistory] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [recordings, setRecordings] = useState([]);\n\n  const sendRequest = async () => {\n    if (!inputMsg.trim()) return;\n\n    // הוספת הודעת המשתמש\n    const userMessage = { text: inputMsg, fromUser: true };\n    setMessages((prev) => [...prev, userMessage]);\n    const newHistory = [...history, inputMsg];\n    setHistory(newHistory);\n\n    try {\n      setIsLoading(true);\n      // שולחים את כל ההיסטוריה כולל ההודעה החדשה\n      console.log(\"API URL:\", process.env.REACT_APP_API_URL);\n      const res = await fetch(`${process.env.REACT_APP_API_URL}/predict`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          history: newHistory, // שולחים את כל ההיסטוריה + ההודעה הנוכחית\n        }),\n      });\n\n      if (!res.ok) {\n        throw new Error(\"Server error\");\n      }\n\n      const data = await res.json();\n      const answer = data?.result || \"Error: No result received\";\n\n      // הוספת תשובת השרת להודעות וגם להיסטוריה\n      setMessages((prev) => [...prev, { text: answer, fromUser: false }]);\n      setHistory([...newHistory, answer]);\n      setInputMsg(\"\");\n    } catch (error) {\n      setMessages((prev) => [\n        ...prev,\n        { text: \"Error contacting server\", fromUser: false },\n      ]);\n    }\n    setIsLoading(false);\n  };\n\n  // כפתור לאיפוס הצ'אט (היסטוריה והודעות)\nconst newChat = () => {\n  setMessages([]);\n  setHistory([]);\n  setInputMsg('');\n  setRecordings([]);\n};\n\n// טיפול בקבלת ההקלטה מ-VoiceRecorder (מכניסים לאחסון ההיסטוריה)\nconst handleSendAudio = (blob) => {\n  const url = URL.createObjectURL(blob);\n  const id = Date.now();  // מזהה ייחודי\n  setRecordings(prev => [...prev, { id, url, blob }]);\n  // אפשר להוסיף כאן הודעה בטקסט אם רוצים\n};\nconst deleteRecording = (id) => {\n  setRecordings(prev => prev.filter(rec => rec.id !== id));\n};\n\n  return (\n    <div style={{ maxWidth: \"600px\", margin: \"0 auto\", padding: \"2rem\" }}>\n      <h1>ResQPal Chat</h1>\n      <ChatWindow messages={messages} />\n      <MessageInput\n        inputMsg={inputMsg}\n        setInputMsg={setInputMsg}\n        onSend={sendRequest}\n        disabled={isLoading}\n      />\n<VoiceRecorder onSendAudio={handleSendAudio} />\n\n<button onClick={newChat} style={{ marginTop: '1rem' }}>New Chat</button>\n\n<h2>Recordings History</h2>\n{recordings.length === 0 && <p>No recordings yet.</p>}\n<ul style={{ listStyle: 'none', padding: 0 }}>\n  {recordings.map(({ id, url }) => (\n    <li key={id} style={{ marginBottom: '1rem' }}>\n      <audio controls src={url} />\n      <button\n        onClick={() => deleteRecording(id)}\n        style={{ marginLeft: '1rem', color: 'red', cursor: 'pointer' }}\n        title=\"Delete Recording\"\n      >\n        <FaTrash />\n      </button>\n    </li>\n  ))}\n</ul>\n\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}