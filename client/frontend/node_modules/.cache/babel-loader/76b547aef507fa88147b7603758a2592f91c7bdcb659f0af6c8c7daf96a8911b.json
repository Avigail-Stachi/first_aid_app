{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\first_aid_app\\\\client\\\\frontend\\\\src\\\\components\\\\VoiceRecorder.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction VoiceRecorder({\n  onSendAudio\n}) {\n  _s();\n  const [status, setStatus] = useState(\"idle\"); // idle, recording, recorded\n  const mediaRecorderRef = useRef(null);\n  const audioChunksRef = useRef([]);\n  const audioUrlRef = useRef(null);\n  const audioRef = useRef(null);\n\n  // התחלת הקלטה\n  const startRecording = async () => {\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\n      alert(\"אין תמיכה במיקרופון בדפדפן שלך\");\n      return;\n    }\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n    mediaRecorderRef.current = new MediaRecorder(stream);\n    audioChunksRef.current = [];\n    mediaRecorderRef.current.ondataavailable = event => {\n      if (event.data.size > 0) {\n        audioChunksRef.current.push(event.data);\n      }\n    };\n    mediaRecorderRef.current.onstop = () => {\n      const blob = new Blob(audioChunksRef.current, {\n        type: \"audio/webm\"\n      });\n      if (audioUrlRef.current) {\n        URL.revokeObjectURL(audioUrlRef.current);\n      }\n      audioUrlRef.current = URL.createObjectURL(blob);\n      setStatus(\"recorded\");\n    };\n    mediaRecorderRef.current.start();\n    setStatus(\"recording\");\n  };\n\n  // עצירת ההקלטה\n  const stopRecording = () => {\n    if (mediaRecorderRef.current && status === \"recording\") {\n      mediaRecorderRef.current.stop();\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\n    }\n  };\n\n  // שליחת ההקלטה ל-App\n  const sendRecording = () => {\n    if (!audioChunksRef.current.length) {\n      return;\n    }\n    console.log(\"iiiiiiiiiiiiiiiiiiiii\");\n    const blob = new Blob(audioChunksRef.current, {\n      type: \"audio/webm\"\n    });\n    console.log(blob);\n    onSendAudio(blob);\n    resetRecording();\n  };\n\n  // איפוס הקלטה\n  const resetRecording = () => {\n    setStatus(\"idle\");\n    audioChunksRef.current = [];\n    if (audioUrlRef.current) {\n      URL.revokeObjectURL(audioUrlRef.current);\n      audioUrlRef.current = null;\n    }\n  };\n\n  // ניקוי זיכרון כאשר הקומפוננטה מתרוקנת\n  useEffect(() => {\n    return () => {\n      if (audioUrlRef.current) {\n        URL.revokeObjectURL(audioUrlRef.current);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      border: \"1px solid gray\",\n      padding: 10,\n      maxWidth: 400\n    },\n    children: [status === \"idle\" && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startRecording,\n      children: \"Start Recording\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), status === \"recording\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: stopRecording,\n        children: \"Stop Recording\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Recording...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), status === \"recorded\" && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n        ref: audioRef,\n        src: audioUrlRef.current,\n        controls: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendRecording,\n          children: \"Send Recording\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: resetRecording,\n          style: {\n            marginLeft: 10\n          },\n          children: \"Reset\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n}\n_s(VoiceRecorder, \"8EhCG3AgZ0c/TCvyFRFGHHoDXSk=\");\n_c = VoiceRecorder;\nexport default VoiceRecorder;\nvar _c;\n$RefreshReg$(_c, \"VoiceRecorder\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","Fragment","_Fragment","VoiceRecorder","onSendAudio","_s","status","setStatus","mediaRecorderRef","audioChunksRef","audioUrlRef","audioRef","startRecording","navigator","mediaDevices","getUserMedia","alert","stream","audio","current","MediaRecorder","ondataavailable","event","data","size","push","onstop","blob","Blob","type","URL","revokeObjectURL","createObjectURL","start","stopRecording","stop","getTracks","forEach","track","sendRecording","length","console","log","resetRecording","style","border","padding","maxWidth","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","src","controls","marginTop","marginLeft","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/first_aid_app/client/frontend/src/components/VoiceRecorder.jsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\r\n\r\nfunction VoiceRecorder({ onSendAudio }) {\r\n  const [status, setStatus] = useState(\"idle\"); // idle, recording, recorded\r\n  const mediaRecorderRef = useRef(null);\r\n  const audioChunksRef = useRef([]);\r\n  const audioUrlRef = useRef(null);\r\n  const audioRef = useRef(null);\r\n\r\n  // התחלת הקלטה\r\n  const startRecording = async () => {\r\n    if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {\r\n      alert(\"אין תמיכה במיקרופון בדפדפן שלך\");\r\n      return;\r\n    }\r\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n    mediaRecorderRef.current = new MediaRecorder(stream);\r\n    audioChunksRef.current = [];\r\n\r\n    mediaRecorderRef.current.ondataavailable = (event) => {\r\n      if (event.data.size > 0) {\r\n        audioChunksRef.current.push(event.data);\r\n      }\r\n    };\r\n\r\n    mediaRecorderRef.current.onstop = () => {\r\n      const blob = new Blob(audioChunksRef.current, { type: \"audio/webm\" });\r\n      if (audioUrlRef.current) {\r\n        URL.revokeObjectURL(audioUrlRef.current);\r\n      }\r\n      audioUrlRef.current = URL.createObjectURL(blob);\r\n      setStatus(\"recorded\");\r\n    };\r\n\r\n    mediaRecorderRef.current.start();\r\n    setStatus(\"recording\");\r\n  };\r\n\r\n  // עצירת ההקלטה\r\n  const stopRecording = () => {\r\n    if (mediaRecorderRef.current && status === \"recording\") {\r\n      mediaRecorderRef.current.stop();\r\n      mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\r\n    }\r\n  };\r\n\r\n  // שליחת ההקלטה ל-App\r\n  const sendRecording = () => {\r\n    if (!audioChunksRef.current.length)\r\n    {\r\n      return;\r\n    }\r\n    console.log(\"iiiiiiiiiiiiiiiiiiiii\")\r\n\r\n    const blob = new Blob(audioChunksRef.current, { type: \"audio/webm\" });\r\n    console.log(blob)\r\n    onSendAudio(blob);\r\n    resetRecording();\r\n  };\r\n\r\n  // איפוס הקלטה\r\n  const resetRecording = () => {\r\n    setStatus(\"idle\");\r\n    audioChunksRef.current = [];\r\n    if (audioUrlRef.current) {\r\n      URL.revokeObjectURL(audioUrlRef.current);\r\n      audioUrlRef.current = null;\r\n    }\r\n  };\r\n\r\n  // ניקוי זיכרון כאשר הקומפוננטה מתרוקנת\r\n  useEffect(() => {\r\n    return () => {\r\n      if (audioUrlRef.current) {\r\n        URL.revokeObjectURL(audioUrlRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ border: \"1px solid gray\", padding: 10, maxWidth: 400 }}>\r\n      {status === \"idle\" && (\r\n        <button onClick={startRecording}>Start Recording</button>\r\n      )}\r\n\r\n      {status === \"recording\" && (\r\n        <>\r\n          <button onClick={stopRecording}>Stop Recording</button>\r\n          <p>Recording...</p>\r\n        </>\r\n      )}\r\n\r\n      {status === \"recorded\" && (\r\n        <>\r\n          <audio ref={audioRef} src={audioUrlRef.current} controls />\r\n          <div style={{ marginTop: 10 }}>\r\n            <button onClick={sendRecording}>Send Recording</button>\r\n            <button onClick={resetRecording} style={{ marginLeft: 10 }}>\r\n              Reset\r\n            </button>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default VoiceRecorder;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE3D,SAASC,aAAaA,CAAC;EAAEC;AAAY,CAAC,EAAE;EAAAC,EAAA;EACtC,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EAC9C,MAAMY,gBAAgB,GAAGX,MAAM,CAAC,IAAI,CAAC;EACrC,MAAMY,cAAc,GAAGZ,MAAM,CAAC,EAAE,CAAC;EACjC,MAAMa,WAAW,GAAGb,MAAM,CAAC,IAAI,CAAC;EAChC,MAAMc,QAAQ,GAAGd,MAAM,CAAC,IAAI,CAAC;;EAE7B;EACA,MAAMe,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAACC,SAAS,CAACC,YAAY,IAAI,CAACD,SAAS,CAACC,YAAY,CAACC,YAAY,EAAE;MACnEC,KAAK,CAAC,gCAAgC,CAAC;MACvC;IACF;IACA,MAAMC,MAAM,GAAG,MAAMJ,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;MAAEG,KAAK,EAAE;IAAK,CAAC,CAAC;IACzEV,gBAAgB,CAACW,OAAO,GAAG,IAAIC,aAAa,CAACH,MAAM,CAAC;IACpDR,cAAc,CAACU,OAAO,GAAG,EAAE;IAE3BX,gBAAgB,CAACW,OAAO,CAACE,eAAe,GAAIC,KAAK,IAAK;MACpD,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE;QACvBf,cAAc,CAACU,OAAO,CAACM,IAAI,CAACH,KAAK,CAACC,IAAI,CAAC;MACzC;IACF,CAAC;IAEDf,gBAAgB,CAACW,OAAO,CAACO,MAAM,GAAG,MAAM;MACtC,MAAMC,IAAI,GAAG,IAAIC,IAAI,CAACnB,cAAc,CAACU,OAAO,EAAE;QAAEU,IAAI,EAAE;MAAa,CAAC,CAAC;MACrE,IAAInB,WAAW,CAACS,OAAO,EAAE;QACvBW,GAAG,CAACC,eAAe,CAACrB,WAAW,CAACS,OAAO,CAAC;MAC1C;MACAT,WAAW,CAACS,OAAO,GAAGW,GAAG,CAACE,eAAe,CAACL,IAAI,CAAC;MAC/CpB,SAAS,CAAC,UAAU,CAAC;IACvB,CAAC;IAEDC,gBAAgB,CAACW,OAAO,CAACc,KAAK,CAAC,CAAC;IAChC1B,SAAS,CAAC,WAAW,CAAC;EACxB,CAAC;;EAED;EACA,MAAM2B,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI1B,gBAAgB,CAACW,OAAO,IAAIb,MAAM,KAAK,WAAW,EAAE;MACtDE,gBAAgB,CAACW,OAAO,CAACgB,IAAI,CAAC,CAAC;MAC/B3B,gBAAgB,CAACW,OAAO,CAACF,MAAM,CAACmB,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACH,IAAI,CAAC,CAAC,CAAC;IAC5E;EACF,CAAC;;EAED;EACA,MAAMI,aAAa,GAAGA,CAAA,KAAM;IAC1B,IAAI,CAAC9B,cAAc,CAACU,OAAO,CAACqB,MAAM,EAClC;MACE;IACF;IACAC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;IAEpC,MAAMf,IAAI,GAAG,IAAIC,IAAI,CAACnB,cAAc,CAACU,OAAO,EAAE;MAAEU,IAAI,EAAE;IAAa,CAAC,CAAC;IACrEY,OAAO,CAACC,GAAG,CAACf,IAAI,CAAC;IACjBvB,WAAW,CAACuB,IAAI,CAAC;IACjBgB,cAAc,CAAC,CAAC;EAClB,CAAC;;EAED;EACA,MAAMA,cAAc,GAAGA,CAAA,KAAM;IAC3BpC,SAAS,CAAC,MAAM,CAAC;IACjBE,cAAc,CAACU,OAAO,GAAG,EAAE;IAC3B,IAAIT,WAAW,CAACS,OAAO,EAAE;MACvBW,GAAG,CAACC,eAAe,CAACrB,WAAW,CAACS,OAAO,CAAC;MACxCT,WAAW,CAACS,OAAO,GAAG,IAAI;IAC5B;EACF,CAAC;;EAED;EACArB,SAAS,CAAC,MAAM;IACd,OAAO,MAAM;MACX,IAAIY,WAAW,CAACS,OAAO,EAAE;QACvBW,GAAG,CAACC,eAAe,CAACrB,WAAW,CAACS,OAAO,CAAC;MAC1C;IACF,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEnB,OAAA;IAAK4C,KAAK,EAAE;MAAEC,MAAM,EAAE,gBAAgB;MAAEC,OAAO,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAI,CAAE;IAAAC,QAAA,GAClE1C,MAAM,KAAK,MAAM,iBAChBN,OAAA;MAAQiD,OAAO,EAAErC,cAAe;MAAAoC,QAAA,EAAC;IAAe;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CACzD,EAEA/C,MAAM,KAAK,WAAW,iBACrBN,OAAA,CAAAE,SAAA;MAAA8C,QAAA,gBACEhD,OAAA;QAAQiD,OAAO,EAAEf,aAAc;QAAAc,QAAA,EAAC;MAAc;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eACvDrD,OAAA;QAAAgD,QAAA,EAAG;MAAY;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC;IAAA,eACnB,CACH,EAEA/C,MAAM,KAAK,UAAU,iBACpBN,OAAA,CAAAE,SAAA;MAAA8C,QAAA,gBACEhD,OAAA;QAAOsD,GAAG,EAAE3C,QAAS;QAAC4C,GAAG,EAAE7C,WAAW,CAACS,OAAQ;QAACqC,QAAQ;MAAA;QAAAN,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAC3DrD,OAAA;QAAK4C,KAAK,EAAE;UAAEa,SAAS,EAAE;QAAG,CAAE;QAAAT,QAAA,gBAC5BhD,OAAA;UAAQiD,OAAO,EAAEV,aAAc;UAAAS,QAAA,EAAC;QAAc;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACvDrD,OAAA;UAAQiD,OAAO,EAAEN,cAAe;UAACC,KAAK,EAAE;YAAEc,UAAU,EAAE;UAAG,CAAE;UAAAV,QAAA,EAAC;QAE5D;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA,eACN,CACH;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAChD,EAAA,CAvGQF,aAAa;AAAAwD,EAAA,GAAbxD,aAAa;AAyGtB,eAAeA,aAAa;AAAC,IAAAwD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}